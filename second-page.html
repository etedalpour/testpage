<!DOCTYPE html>
<html>
<head>
    <title>API Tester</title>
</head>
<body>
    <h1>API Response Tester</h1>
    <button id="testWallet">Test Wallet API</button>
    <button id="testGitHub">Test GitHub API</button>
    <div id="results" style="white-space: pre; font-family: monospace; margin-top: 20px;"></div>

    <script>
        document.getElementById('testWallet').addEventListener('click', async () => {
            try {
                const response = await fetch("https://alietedal.ir:8080/api/user-wallet");
                const rawText = await response.text();
                let formattedOutput = "RAW RESPONSE:\n" + rawText + "\n\n";
                
                try {
                    const data = JSON.parse(rawText);
                    formattedOutput += "PARSED RESPONSE:\n" + JSON.stringify(data, null, 2);
                } catch (e) {
                    formattedOutput += "ERROR PARSING JSON: " + e.message;
                }
                
                document.getElementById('results').textContent = formattedOutput;
            } catch (error) {
                document.getElementById('results').textContent = "FETCH ERROR: " + error.message;
            }
        });

        document.getElementById('testGitHub').addEventListener('click', async () => {
            const code = prompt("Enter GitHub code from URL:");
            if (!code) return;
            
            try {
                const response = await fetch("https://alietedal.ir:8080/api/github-auth", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ code })
                });
                
                const rawText = await response.text();
                let formattedOutput = "RAW RESPONSE:\n" + rawText + "\n\n";
                
                try {
                    const data = JSON.parse(rawText);
                    formattedOutput += "PARSED RESPONSE:\n" + JSON.stringify(data, null, 2);
                } catch (e) {
                    formattedOutput += "ERROR PARSING JSON: " + e.message;
                }
                
                document.getElementById('results').textContent = formattedOutput;
            } catch (error) {
                document.getElementById('results').textContent = "FETCH ERROR: " + error.message;
            }
        });
    </script>
</body>
</html>
