async function handleGitHubCallback() {
    const params = new URLSearchParams(window.location.search);
    const code = params.get("code");

    if (!code) {
        console.error("‚ùå GitHub OAuth code not found in URL!");
        alert("GitHub authentication failed: No code found.");
        return;
    }

    console.log("‚úÖ GitHub OAuth Code Received:", code);

    const backendUrl = "https://37.252.14.103:3000";

    try {
        const response = await fetch(`${backendUrl}/api/github-auth`, {
            method: "POST",  // ‚úÖ Ensure it is a POST request
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ code })
        });

        console.log("üîÑ Response Status:", response.status);
        const data = await response.json();
        console.log("‚úÖ Backend Response:", data);

        if (data.success) {
            window.location.href = "https://etedalpour.github.io/testpage/second-page.html";
        } else {
            alert("‚ùå GitHub authentication failed: " + data.message);
        }
    } catch (error) {
        console.error("‚ùå Error communicating with backend:", error);
        alert("Network error: " + error.message);
    }
}

handleGitHubCallback();
